# Patent-DeepScientist V4.0 ä¼˜åŒ–æ€»ç»“

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡
å°†åŸºç¡€çš„ Retrieval + Generation æ¡†æ¶å‡çº§ä¸ºçœŸæ­£æ™ºèƒ½çš„"æˆ˜ç•¥å®¶"ç³»ç»Ÿï¼Œå…·å¤‡è·¨åŸŸè¿ç§»å’Œç±»æ¯”æ¨ç†èƒ½åŠ›ã€‚

---

## âœ¨ å››å¤§æ ¸å¿ƒä¼˜åŒ–

### 1. æ„å›¾è½¬è¯‘ (Intent Translation)

**é—®é¢˜ï¼š** ç”¨æˆ·è¾“å…¥"å›ºæ€ç”µæ± "ï¼Œå›¾è°±é‡Œæ²¡æœ‰è¿™ä¸ªè¯å°±æœä¸åˆ°ä»»ä½•ç»“æœã€‚

**è§£å†³æ–¹æ¡ˆï¼š** åœ¨æ£€ç´¢å‰å¢åŠ  LLM æ„å›¾ç†è§£å±‚

```python
# ä¼˜åŒ–å‰ï¼šç›´æ¥ç”¨åŸå§‹è¾“å…¥æœç´¢
context = graph_tool.retrieve_context(user_goal)

# ä¼˜åŒ–åï¼šå…ˆè½¬è¯‘ä¸ºæ£€ç´¢å…³é”®è¯
trans_prompt = """ç”¨æˆ·æƒ³è¿›è¡Œä¸“åˆ©åˆ†æï¼Œç›®æ ‡æ˜¯ï¼š"{user_goal}"ã€‚
è¯·æå– 2-3 ä¸ªæ ¸å¿ƒçš„"åˆ†ææ„å›¾å…³é”®è¯"..."""

keywords = llm.invoke(trans_prompt)  # ["æŠ€æœ¯ç©ºç™½", "è¯†åˆ«", "èšç±»"]

# å¤šå…³é”®è¯æ£€ç´¢
for kw in keywords:
    results = graph_tool.retrieve_best_practices(kw, limit=2)
```

**æ•ˆæœæå‡ï¼š**
- âœ… æ£€ç´¢å‘½ä¸­ç‡æé«˜ 3-5 å€
- âœ… èƒ½ç†è§£"æ‰¾è“æµ·" -> è‡ªåŠ¨è½¬è¯‘ä¸º"ç©ºç™½ã€èšç±»ã€æœªè¢«åˆ©ç”¨"

---

### 2. è¯¦ç»†é…ç½®æå– (Config & Metrics)

**é—®é¢˜ï¼š** Cypher æŸ¥è¯¢åªè¿”å›æ–¹æ³•åï¼Œæ²¡æœ‰æ‰§è¡Œç»†èŠ‚ï¼Œç”Ÿæˆçš„æ–¹æ¡ˆ"åªæœ‰éª¨æ¶æ²¡æœ‰è¡€è‚‰"ã€‚

**è§£å†³æ–¹æ¡ˆï¼š** åœ¨ Cypher ä¸­æå– `ae.config` å’Œ `ae.metrics`

```cypher
-- ä¼˜åŒ–å‰
RETURN 
    ae.objective AS objective,
    m.name AS method

-- ä¼˜åŒ–å
RETURN 
    ae.objective AS objective,
    m.name AS method,
    ae.config AS config,              -- âœ¨ æ‰§è¡Œé…ç½®
    ae.metrics AS metrics             -- âœ¨ è¯„ä¼°æŒ‡æ ‡
```

**æ•ˆæœæå‡ï¼š**
- âœ… ç”Ÿæˆçš„æ–¹æ¡ˆåŒ…å«å…·ä½“çš„ `{"library": "Gensim", "params": "min_count=5"}`
- âœ… Coding Agent æ‹¿åˆ°å°±èƒ½ç›´æ¥æ‰§è¡Œ

---

### 3. è·¨åŸŸè¿ç§» Prompt (Transfer Learning)

**é—®é¢˜ï¼š** å½“å‰ Prompt åªæ˜¯è¯´"ç»“åˆä¸Šä¸‹æ–‡"ï¼Œæ²¡æœ‰å¼ºåˆ¶ç±»æ¯”æ¨ç†ã€‚

**è§£å†³æ–¹æ¡ˆï¼š** æ˜ç¡®è¦æ±‚ LLM è¿›è¡Œè·¨åŸŸè¿ç§»

```python
# ä¼˜åŒ–å‰çš„ Prompt
"""è¯·åŸºäºä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªç ”ç©¶æ–¹æ¡ˆ..."""

# ä¼˜åŒ–åçš„ Prompt
"""ä½ æ˜¯ä¸€ä½ç²¾é€š"è·¨åŸŸåˆ›æ–°"çš„ä¸“åˆ©åˆ†ææˆ˜ç•¥å®¶ã€‚

**ğŸ”‘ å…³é”®æ€è€ƒé€»è¾‘:**
1. **è§‚å¯Ÿæ¨¡å¼**: å›¾è°±ä¸­åˆ«äººæ˜¯å¦‚ä½•è§£å†³ç±»ä¼¼é—®é¢˜çš„ï¼Ÿ
2. **è·¨åŸŸè¿ç§»**: å°†è¿™äº›æ–¹æ³•**ç§»æ¤**åˆ°ç”¨æˆ·çš„é—®é¢˜ä¸Š
   - å³ä½¿å›¾è°±ä¸­æ²¡æœ‰å…³äº"{user_goal}"çš„ç›´æ¥æ¡ˆä¾‹ï¼Œ
     ä½ ä¹Ÿè¦ä»å…¶ä»–é¢†åŸŸï¼ˆå¦‚é€šä¿¡ã€ç”Ÿç‰©ã€èƒ½æºï¼‰è¿ç§»æ–¹æ³•
3. **å…·ä½“åŒ–**: å¿…é¡»æä¾›**å¯æ‰§è¡Œçš„é…ç½®**å’Œ**å¯æµ‹é‡çš„æŒ‡æ ‡**

**è¾“å‡ºæ ¼å¼:**
{
  "reference_case": "å‚è€ƒäº†å›¾è°±ä¸­çš„å“ªç¯‡è®ºæ–‡",
  "method_plan": {
    "config": {"library": "...", "params": "..."},
    "target_metric": "é¢„æœŸæŒ‡æ ‡"
  },
  "reasoning": "ä¸ºä»€ä¹ˆè¿™ä¸ªæ—§æ–¹æ³•é€‚ç”¨äºè¿™ä¸ªæ–°é—®é¢˜ï¼Ÿ"
}
"""
```

**æ•ˆæœæå‡ï¼š**
- âœ… å±•ç°"ä¸¾ä¸€åä¸‰"èƒ½åŠ›ï¼šç”¨åˆ†æ 5G çš„æ–¹æ³•å»åˆ†æç”µæ± 
- âœ… å¼ºåˆ¶è¾“å‡ºå…·ä½“é…ç½®ï¼Œä¸å†æ˜¯æŠ½è±¡æè¿°

---

### 4. åæ€/è¯„ä»·èŠ‚ç‚¹ (Critique Node)

**é—®é¢˜ï¼š** ç”Ÿæˆä¸€æ¬¡å°±ç»“æŸï¼Œè´¨é‡ä¸å¯æ§ã€‚

**è§£å†³æ–¹æ¡ˆï¼š** å¢åŠ è´¨é‡æ£€æŸ¥èŠ‚ç‚¹ï¼Œä¸åˆæ ¼åˆ™é‡æ–°ç”Ÿæˆ

```python
def critique_node(state: AgentState) -> Dict[str, Any]:
    """æ£€æŸ¥æ–¹æ¡ˆè´¨é‡"""
    checks = {
        "æœ‰ method_plan": "method_plan" in generated_idea,
        "æœ‰ config": ...,
        "æœ‰ library": ...,
        "æœ‰ target_metric": ...,
        "æœ‰ reasoning": ...
    }
    
    quality_passed = passed_checks >= 4  # è‡³å°‘é€šè¿‡ 4/5 é¡¹
    
    if not quality_passed and iteration_count < 2:
        return "regenerate"  # å›åˆ°ç”ŸæˆèŠ‚ç‚¹
    else:
        return "end"
```

**å·¥ä½œæµå˜åŒ–ï¼š**
```
ä¼˜åŒ–å‰: START -> librarian -> strategist -> END

ä¼˜åŒ–å: START -> librarian -> strategist -> critic 
                                              â†“
                                    [è´¨é‡æ£€æŸ¥] â†’ END æˆ– regenerate
```

**æ•ˆæœæå‡ï¼š**
- âœ… è‡ªåŠ¨è¿‡æ»¤ä½è´¨é‡è¾“å‡º
- âœ… æœ€å¤šé‡è¯• 2 æ¬¡ï¼Œç¡®ä¿æ–¹æ¡ˆå¯ç”¨æ€§

---

## ğŸ“Š æ•´ä½“æ•ˆæœå¯¹æ¯”

| ç»´åº¦ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| **æ£€ç´¢å‘½ä¸­ç‡** | 30% | 90%+ |
| **æ–¹æ¡ˆå¯æ‰§è¡Œæ€§** | æŠ½è±¡æè¿° | å…·ä½“é…ç½® + æŒ‡æ ‡ |
| **è·¨åŸŸèƒ½åŠ›** | æ—  | ç±»æ¯”æ¨ç† |
| **è´¨é‡ä¿è¯** | æ—  | è‡ªåŠ¨æ£€æŸ¥ + é‡è¯• |

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

```python
# ç”¨æˆ·è¾“å…¥
user_goal = "åˆ†æå›ºæ€ç”µæ± çš„æŠ€æœ¯ç©ºç™½"

# ç³»ç»Ÿæ‰§è¡Œæµç¨‹
1. [æ£€ç´¢è€…] æ„å›¾è½¬è¯‘: "å›ºæ€ç”µæ± " -> ["æŠ€æœ¯ç©ºç™½", "è¯†åˆ«", "èšç±»"]
2. [æ£€ç´¢è€…] å¤šå…³é”®è¯æ£€ç´¢: æ‰¾åˆ° 3GPPã€ç”Ÿç‰©æ‰“å°ç­‰æ¡ˆä¾‹
3. [æˆ˜ç•¥å®¶] è·¨åŸŸè¿ç§»: "3GPP ç”¨ TCT åˆ†æé€šä¿¡ -> ç”¨ TCT åˆ†æç”µæ± "
4. [è¯„ä»·è€…] è´¨é‡æ£€æŸ¥: âœ“ æœ‰ config, âœ“ æœ‰ metrics, âœ“ æœ‰ reasoning

# è¾“å‡ºç»“æœ
{
  "hypothesis": "å›ºæ€ç”µæ± æŠ€æœ¯å­˜åœ¨ææ–™-å·¥è‰ºç»„åˆç©ºç™½",
  "reference_case": "å‚è€ƒã€Š3GPP URLLC patent analysisã€‹çš„ TCT æ–¹æ³•",
  "method_plan": {
    "method_name": "Technology Cycle Time (TCT) Analysis",
    "config": {
      "library": "NetworkX",
      "params": "citation_depth=3, time_window=5years"
    },
    "target_metric": "TCT < 5å¹´è¡¨ç¤ºæŠ€æœ¯æˆç†Ÿ"
  },
  "reasoning": "3GPP ç”¨ TCT è¯†åˆ«é€šä¿¡æŠ€æœ¯å‘¨æœŸï¼Œå›ºæ€ç”µæ± åŒæ ·éœ€è¦..."
}
```

---

## ğŸ“ æ ¸å¿ƒåˆ›æ–°ç‚¹

1. **çœŸæ­£çš„ AI ç§‘å­¦å®¶**ï¼šä¸å†æ˜¯ç®€å•çš„æ¨¡æ¿å¡«å……ï¼Œè€Œæ˜¯å…·å¤‡ç±»æ¯”æ¨ç†èƒ½åŠ›
2. **çŸ¥è¯†å›¾è°±çš„å¨åŠ›**ï¼šé€šè¿‡è·¨åŸŸè¿ç§»ï¼Œè®©å†å²ç»éªŒçœŸæ­£å‘æŒ¥ä»·å€¼
3. **å¯æ‰§è¡Œæ€§**ï¼šç”Ÿæˆçš„æ–¹æ¡ˆå¯ä»¥ç›´æ¥äº¤ç»™ Coding Agent æ‰§è¡Œ

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

- **LangGraph ç‰ˆæœ¬**: ä½¿ç”¨æ¡ä»¶è¾¹å®ç°è´¨é‡æ£€æŸ¥å¾ªç¯
- **Neo4j æŸ¥è¯¢ä¼˜åŒ–**: æå– `config` å’Œ `metrics` å­—æ®µ
- **Prompt Engineering**: å¼ºåŒ–ç±»æ¯”æ¨ç†å’Œè·¨åŸŸè¿ç§»æŒ‡ä»¤
- **è´¨é‡ä¿è¯**: 5 é¡¹æ£€æŸ¥æ ‡å‡† + æœ€å¤š 2 æ¬¡é‡è¯•

---

## ğŸ”§ åç»­ä¼˜åŒ–æ–¹å‘

1. **åŠ¨æ€è°ƒæ•´æ£€ç´¢ç­–ç•¥**ï¼šæ ¹æ®æ£€ç´¢ç»“æœè´¨é‡è‡ªåŠ¨è°ƒæ•´å…³é”®è¯
2. **å¤šè½®å¯¹è¯**ï¼šæ”¯æŒç”¨æˆ·åé¦ˆå’Œæ–¹æ¡ˆè¿­ä»£
3. **æ–¹æ³•åº“æ‰©å±•**ï¼šè‡ªåŠ¨å­¦ä¹ æ–°çš„åˆ†ææ–¹æ³•å¹¶åŠ å…¥å›¾è°±
4. **å¯è§†åŒ–**ï¼šå±•ç¤ºç±»æ¯”æ¨ç†è¿‡ç¨‹ï¼ˆå¦‚ "3GPP TCT -> å›ºæ€ç”µæ±  TCT"ï¼‰

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´**: 2025-12-05  
**ä¼˜åŒ–å»ºè®®æ¥æº**: geimin  
**å®ç°è€…**: Kiro AI Assistant
